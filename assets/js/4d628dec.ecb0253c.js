"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2313],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>k});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),u=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=u(e.components);return n.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,p=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=u(a),k=l,h=d["".concat(p,".").concat(k)]||d[k]||s[k]||o;return a?n.createElement(h,i(i({ref:t},c),{},{components:a})):n.createElement(h,i({ref:t},c))}));function k(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,i=new Array(o);i[0]=d;var r={};for(var p in t)hasOwnProperty.call(t,p)&&(r[p]=t[p]);r.originalType=e,r.mdxType="string"==typeof e?e:l,i[1]=r;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3090:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>s,frontMatter:()=>o,metadata:()=>r,toc:()=>u});var n=a(7462),l=(a(7294),a(3905));const o={},i="Okta",r={unversionedId:"authenticate/oauth/backend-oauth2-0001-okta",id:"authenticate/oauth/backend-oauth2-0001-okta",title:"Okta",description:'Create an "Application," by browsing to "Applications" and clicking',source:"@site/docs/authenticate/oauth/81-backend-oauth2-0001-okta.md",sourceDirName:"authenticate/oauth",slug:"/authenticate/oauth/backend-oauth2-0001-okta",permalink:"/docs/authenticate/oauth/backend-oauth2-0001-okta",draft:!1,editUrl:"https://github.com/authp/authp.github.io/edit/main/docs/authenticate/oauth/81-backend-oauth2-0001-okta.md",tags:[],version:"current",sidebarPosition:81,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Generic Provider",permalink:"/docs/authenticate/oauth/backend-oauth2-0000-generic"},next:{title:"Google Identity Platform",permalink:"/docs/authenticate/oauth/backend-oauth2-0002-google"}},p={},u=[],c={toc:u};function s(e){let{components:t,...o}=e;return(0,l.kt)("wrapper",(0,n.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"okta"},"Okta"),(0,l.kt)("p",null,'Create an "Application," by browsing to "Applications" and clicking\n"Add Application" button.'),(0,l.kt)("p",null,'For a website, the choice is "Web".'),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - New App Choice",src:a(1493).Z,width:"1038",height:"571"})),(0,l.kt)("p",null,"Provided your application is running on localhost port 8443, provide the following\ninformation:"),(0,l.kt)("p",null,"Base URI entries:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://myapp.localdomain.local:8443/")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://localhost:8443/"))),(0,l.kt)("p",null,"Login redirect URIs:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://myapp.localdomain.local:8443/auth/oauth2/okta/authorization-code-callback")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://localhost:8443/auth/oauth2/okta/authorization-code-callback"))),(0,l.kt)("p",null,"Logout redirect URIs:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://myapp.localdomain.local:8443/auth/logout")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"https://localhost:8443/auth/logout"))),(0,l.kt)("p",null,"Group Assignments:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Everyone"),(0,l.kt)("li",{parentName:"ul"},"Viewer"),(0,l.kt)("li",{parentName:"ul"},"Editor"),(0,l.kt)("li",{parentName:"ul"},"Administrator")),(0,l.kt)("p",null,"Grant type allowed:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Client acting on behalf of itself",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Client Credentials: No"))),(0,l.kt)("li",{parentName:"ul"},"Client acting on behalf of a user",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Authorization Code: Yes"),(0,l.kt)("li",{parentName:"ul"},"Refresh Token: No"),(0,l.kt)("li",{parentName:"ul"},"Implicit (Hybrid): No")))),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - New App Setup",src:a(9893).Z,width:"1011",height:"888"})),(0,l.kt)("p",null,"Review the newly created application."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - Settings - General",src:a(6608).Z,width:"734",height:"874"})),(0,l.kt)("p",null,"Store the credentials securely."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - Settings - Client Credentials",src:a(5561).Z,width:"732",height:"331"})),(0,l.kt)("p",null,"Review default Sign On Policy."),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - Settings - Sign On",src:a(4343).Z,width:"741",height:"713"})),(0,l.kt)("p",null,"By default, the default Authorization Server has no ",(0,l.kt)("inlineCode",{parentName:"p"},"groups")," scope."),(0,l.kt)("p",null,'Therefore, browse to "API", "Authorization Servers" and select "default".'),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - API",src:a(8923).Z,width:"822",height:"282"})),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - API",src:a(1118).Z,width:"669",height:"311"})),(0,l.kt)("p",null,'Next, browse to "Scopes" and click "Add Scope".'),(0,l.kt)("p",null,'Fill out the "Add Scope" form:'),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Name: ",(0,l.kt)("inlineCode",{parentName:"li"},"groups")),(0,l.kt)("li",{parentName:"ul"},"Description: ",(0,l.kt)("inlineCode",{parentName:"li"},"This allows the app to view your group memberships.")),(0,l.kt)("li",{parentName:"ul"},'Check "Set as a default scope"'),(0,l.kt)("li",{parentName:"ul"},'Check "Include in public metadata"')),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - Add Scope",src:a(7115).Z,width:"940",height:"581"})),(0,l.kt)("p",null,'Next, browse to "Claims" and click "Add Claim".'),(0,l.kt)("p",null,'Fill out the "Add Claim" form:'),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Name: ",(0,l.kt)("inlineCode",{parentName:"li"},"groups")),(0,l.kt)("li",{parentName:"ul"},'Include in token type: "ID Token", "Always"'),(0,l.kt)("li",{parentName:"ul"},"Value type: Groups"),(0,l.kt)("li",{parentName:"ul"},"Filter: Matches ",(0,l.kt)("inlineCode",{parentName:"li"},".*")," regex"),(0,l.kt)("li",{parentName:"ul"},'Include in: The "groups" scope')),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"Okta Developer - Add Scope",src:a(8410).Z,width:"861",height:"672"})),(0,l.kt)("p",null,"Next, review ",(0,l.kt)("a",{parentName:"p",href:"https://developer.okta.com/docs/reference/api/oidc/#get-started"},"Okta OpenID Connect and OAuth 2.0 API - Get Started"),"."),(0,l.kt)("p",null,"The following ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/greenpau/caddy-auth-docs/blob/main/assets/conf/oauth/okta/Caddyfile"},(0,l.kt)("inlineCode",{parentName:"a"},"Caddyfile")),"\nallows Okta-based authentication."),(0,l.kt)("p",null,"Provided the Okta domain is ",(0,l.kt)("inlineCode",{parentName:"p"},"dev-680653.okta.com"),", the authorization server is\n",(0,l.kt)("inlineCode",{parentName:"p"},"default"),", and Client ID is ",(0,l.kt)("inlineCode",{parentName:"p"},"0oa121qw81PJW0Tj34x7"),", check OpenID configuration:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X GET "https://dev-680653.okta.com/oauth2/default/.well-known/openid-configuration?client_id=0oa121qw81PJW0Tj34x7" | jq\n')),(0,l.kt)("p",null,"By default, the plugin logs public keys from ",(0,l.kt)("inlineCode",{parentName:"p"},"keys")," endpoint."))}s.isMDXComponent=!0},6608:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauth2_okta_app_settings_01-cb8aab2747db59c6d9da9477c631aa52.png"},5561:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauth2_okta_app_settings_02-329a69e1ff770d7a21ae518e72f71592.png"},4343:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauth2_okta_app_settings_03-16b1704a792f91f2d4d9915400fc2ca0.png"},9893:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauth2_okta_new_app-91fc606bb0ef98a6c2ba4723b674009d.png"},1493:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/oauth2_okta_new_app_choice-032773eae345af9c5899692f2414699a.png"},8923:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/okta_configure_scope_01-9de32f739e34786808d75ff95f056b64.png"},1118:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/okta_configure_scope_02-852aa26443d9677e26cef7f321e9ffc4.png"},7115:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/okta_configure_scope_03-9460eda92fb8c8ed5be0b68e13f23c63.png"},8410:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/okta_configure_scope_04-9ac3bbb1aed49cfa8f65a32fb353b6a5.png"}}]);