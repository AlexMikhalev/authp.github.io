"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1057],{3905:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>d});var n=a(7294);function i(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function r(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){i(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,i=function(t,e){if(null==t)return{};var a,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||(i[a]=t[a]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)a=o[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}var c=n.createContext({}),p=function(t){var e=n.useContext(c),a=e;return t&&(a="function"==typeof t?t(e):r(r({},e),t)),a},u=function(t){var e=p(t.components);return n.createElement(c.Provider,{value:e},t.children)},s={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},h=n.forwardRef((function(t,e){var a=t.components,i=t.mdxType,o=t.originalType,c=t.parentName,u=l(t,["components","mdxType","originalType","parentName"]),h=p(a),d=i,b=h["".concat(c,".").concat(d)]||h[d]||s[d]||o;return a?n.createElement(b,r(r({ref:e},u),{},{components:a})):n.createElement(b,r({ref:e},u))}));function d(t,e){var a=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=a.length,r=new Array(o);r[0]=h;var l={};for(var c in e)hasOwnProperty.call(e,c)&&(l[c]=e[c]);l.originalType=t,l.mdxType="string"==typeof t?t:i,r[1]=l;for(var p=2;p<o;p++)r[p]=a[p];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},9130:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>s,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var n=a(7462),i=(a(7294),a(3905));const o={},r="Gitlab",l={unversionedId:"authenticate/oauth/backend-oauth2-0009-gitlab",id:"authenticate/oauth/backend-oauth2-0009-gitlab",title:"Gitlab",description:"Whether you are using gitlab.com or hosting your own Gitlab instance",source:"@site/docs/authenticate/oauth/81-backend-oauth2-0009-gitlab.md",sourceDirName:"authenticate/oauth",slug:"/authenticate/oauth/backend-oauth2-0009-gitlab",permalink:"/docs/authenticate/oauth/backend-oauth2-0009-gitlab",draft:!1,editUrl:"https://github.com/authp/authp.github.io/edit/main/docs/authenticate/oauth/81-backend-oauth2-0009-gitlab.md",tags:[],version:"current",sidebarPosition:81,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Facebook",permalink:"/docs/authenticate/oauth/backend-oauth2-0008-facebook"},next:{title:"Ping Identity",permalink:"/docs/authenticate/oauth/backend-oauth2-0010-pingid"}},c={},p=[],u={toc:p};function s(t){let{components:e,...o}=t;return(0,i.kt)("wrapper",(0,n.Z)({},u,o,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"gitlab"},"Gitlab"),(0,i.kt)("p",null,"Whether you are using gitlab.com or hosting your own Gitlab instance\n(e.g. at ",(0,i.kt)("inlineCode",{parentName:"p"},"gitlab.contoso.com"),"), create a new app by browsing to\none of the following URLs:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://gitlab.contoso.com/-/profile/applications")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"https://gitlab.com/-/profile/applications"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - New Application",src:a(8664).Z,width:"1286",height:"484"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - New Application - Scopes",src:a(5931).Z,width:"1285",height:"493"})),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - New Application - Review",src:a(5931).Z,width:"1285",height:"493"})),(0,i.kt)("p",null,"The following ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/greenpau/caddy-auth-docs/blob/main/assets/conf/oauth/gitlab/Caddyfile"},(0,i.kt)("inlineCode",{parentName:"a"},"Caddyfile")),"\nallows Gitlab-based authentication."),(0,i.kt)("p",null,"By default, Gitlab groups are not included into the token, unless\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"user_group_filters")," directive is being user in the configuration."),(0,i.kt)("p",null,"The following directives instruct the portal to add the groups having\n",(0,i.kt)("inlineCode",{parentName:"p"},"barfoo")," in their name and the groups whose names start with the ",(0,i.kt)("inlineCode",{parentName:"p"},"a"),"."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"          user_group_filters barfoo\n          user_group_filters ^a\n")),(0,i.kt)("p",null,"In this case, the groups making it to the JWT token are:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'    "gitlab.contoso.com/barfoo",\n    "gitlab.contoso.com/a-private-group/a-subgroup"\n')),(0,i.kt)("p",null,"When a user browses to the app and clicks Gitlab link, the user is being redirected to\nGitlab instance. "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - Initiate Login",src:a(6075).Z,width:"491",height:"257"})),(0,i.kt)("p",null,"The user should click Authorize to continue."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - Authorize App",src:a(3787).Z,width:"772",height:"671"})),(0,i.kt)("p",null,'Once logged in, the user may browse to "My Identity".'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - Portal",src:a(9861).Z,width:"445",height:"411"})),(0,i.kt)("p",null,"The relevant Gitlab data became a part of the JWT token issued by the portal."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Gitlab - User Identity",src:a(4180).Z,width:"650",height:"899"})))}s.isMDXComponent=!0},3787:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/oauth_gitlab_authorize_app_1-7e41af7ba3ce0c676a48989881a12423.png"},6075:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/oauth_gitlab_init-62a698a1df6b89dfa8102452379b4b01.png"},8664:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/oauth_gitlab_new_app_1-4567558852ea972284c18ed444d756ff.png"},5931:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/oauth_gitlab_new_app_2-1fedbc99257e5dbb51aa1ecd3d210dd7.png"},9861:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/oauth_gitlab_portal-c054fd1d2fe93929e32a6fbdd84524d6.png"},4180:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/oauth_gitlab_user_identity-da001e781f1ed3874f612840e6c3ac94.png"}}]);